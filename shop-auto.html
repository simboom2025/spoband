<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>상품 페이지</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAcSrJ6wyjk1lNraj0uZY6JofoSpAo1hrQ",
      authDomain: "spoband-e41fe.firebaseapp.com",
      projectId: "spoband-e41fe",
      storageBucket: "spoband-e41fe.firebasestorage.app",
      messagingSenderId: "203803760756",
      appId: "1:203803760756:web:d32d2c1d1e272035d91921"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    document.addEventListener("DOMContentLoaded", async () => {
      const tbody = document.getElementById("shopTable");
      const snap = await getDocs(collection(db, "products"));
      snap.forEach((d) => {
        const x = d.data();
        tbody.insertAdjacentHTML("beforeend", `
          <tr>
            <td>${x.name || ""}</td>
            <td>${(x.price || 0).toLocaleString()}원</td>
            <td>${x.link ? `<a href="${x.link}" target="_blank" class="btn btn-sm btn-primary">구매하기</a>` : ""}</td>
            <td>${x.desc || ""}</td>
          </tr>
        `);
      });
    });
  </script>
</head>

<body class="container my-4">
  <h2 class="mb-3">상품 목록</h2>
  <table class="table table-bordered">
    <thead class="table-light">
      <tr><th>상품명</th><th>가격</th><th>구매 링크</th><th>설명</th></tr>
    </thead>
    <tbody id="shopTable"></tbody>
  </table>
</body>
</html>
